#include <avr/pgmspace.h>
/********************************************//**
 * @brief Tablica funkcji sin [0, 2.5PI]
 ***********************************************/
//const int16_t sin_tab[640] PROGMEM = {0,
//401,	803,	1205,	1607,	2008,	2409,	2809,	3210,	3609,	4009,	4407,	4805,	5202,	5599,	5994,	6389,
//6783,	7175,	7567,	7958,	8347,	8735,	9122,	9507,	9891,	10273,	10654,	11033,	11411,	11787,	12161,	12533,
//12904,	13272,	13639,	14003,	14365,	14725,	15083,	15439,	15792,	16143,	16492,	16838,	17181,	17522,	17861,	18196,
//18529,	18859,	19186,	19511,	19832,	20151,	20466,	20778,	21088,	21394,	21697,	21996,	22292,	22585,	22875,	23161,
//23443,	23722,	23998,	24270,	24538,	24802,	25063,	25320,	25573,	25823,	26068,	26310,	26547,	26781,	27011,	27236,
//27457,	27675,	27888,	28097,	28301,	28502,	28698,	28890,	29077,	29260,	29439,	29613,	29783,	29949,	30109,	30266,
//30417,	30565,	30707,	30845,	30978,	31107,	31231,	31350,	31465,	31575,	31680,	31780,	31876,	31966,	32052,	32133,
//32210,	32281,	32348,	32409,	32466,	32518,	32565,	32607,	32645,	32677,	32704,	32727,	32744,	32757,	32765,	32767,
//32765,	32758,	32746,	32729,	32707,	32681,	32649,	32612,	32571,	32525,	32473,	32417,	32356,	32290,	32219,	32144,
//32063,	31978,	31888,	31793,	31693,	31589,	31479,	31366,	31247,	31123,	30995,	30863,	30725,	30583,	30437,	30286,
//30130,	29970,	29805,	29636,	29462,	29284,	29101,	28914,	28723,	28528,	28328,	28124,	27915,	27703,	27486,	27265,
//27040,	26811,	26578,	26341,	26100,	25855,	25606,	25353,	25097,	24836,	24572,	24305,	24033,	23758,	23480,	23198,
//22912,	22623,	22331,	22035,	21736,	21433,	21128,	20819,	20507,	20192,	19874,	19553,	19229,	18902,	18572,	18240,
//17904,	17566,	17226,	16883,	16537,	16189,	15838,	15485,	15130,	14772,	14412,	14050,	13686,	13320,	12952,	12581,
//12209,	11836,	11460,	11082,	10703,	10323,	9941,	9557,	9172,	8785,	8397,	8008,	7618,	7226,	6834,	6440,
//6046,	5650,	5254,	4857,	4459,	4060,	3661,	3262,	2861,	2461,	2060,	1659,	1257,	855,	454,	52,
//-349,	-751,	-1153,	-1554,	-1956,	-2357,	-2757,	-3158,	-3558,	-3957,	-4355,	-4754,	-5151,	-5547,	-5943,	-6338,
//-6732,	-7124,	-7516,	-7907,	-8296,	-8685,	-9071,	-9457,	-9841,	-10224,	-10605,	-10984,	-11362,	-11738,	-12112,	-12485,
//-12856,	-13224,	-13591,	-13956,	-14318,	-14679,	-15037,	-15393,	-15747,	-16098,	-16447,	-16793,	-17137,	-17478,	-17817,	-18153,
//-18486,	-18817,	-19144,	-19469,	-19791,	-20110,	-20425,	-20738,	-21048,	-21354,	-21657,	-21957,	-22254,	-22547,	-22837,	-23124,
//-23407,	-23686,	-23962,	-24235,	-24503,	-24768,	-25030,	-25287,	-25541,	-25791,	-26037,	-26279,	-26517,	-26751,	-26981,	-27207,
//-27429,	-27647,	-27860,	-28070,	-28275,	-28476,	-28673,	-28865,	-29053,	-29237,	-29416,	-29591,	-29761,	-29927,	-30089,	-30246,
//-30398,	-30546,	-30689,	-30827,	-30961,	-31091,	-31215,	-31335,	-31450,	-31561,	-31666,	-31767,	-31864,	-31955,	-32041,	-32123,
//-32200,	-32272,	-32339,	-32402,	-32459,	-32512,	-32559,	-32602,	-32640,	-32673,	-32701,	-32724,	-32742,	-32756,	-32764,	-32767,
//-32766,	-32759,	-32748,	-32732,	-32711,	-32684,	-32653,	-32617,	-32577,	-32531,	-32480,	-32425,	-32364,	-32299,	-32229,	-32154,
//-32074,	-31989,	-31900,	-31805,	-31706,	-31602,	-31494,	-31381,	-31263,	-31140,	-31012,	-30880,	-30743,	-30602,	-30456,	-30306,
//-30150,	-29991,	-29827,	-29658,	-29485,	-29307,	-29125,	-28939,	-28748,	-28553,	-28354,	-28150,	-27942,	-27730,	-27514,	-27294,
//-27069,	-26841,	-26608,	-26372,	-26131,	-25887,	-25639,	-25386,	-25130,	-24870,	-24607,	-24340,	-24069,	-23794,	-23516,	-23234,
//-22949,	-22661,	-22369,	-22073,	-21775,	-21473,	-21167,	-20859,	-20548,	-20233,	-19915,	-19595,	-19271,	-18945,	-18615,	-18283,
//-17948,	-17610,	-17270,	-16927,	-16582,	-16234,	-15884,	-15531,	-15176,	-14819,	-14459,	-14097,	-13733,	-13367,	-13000,	-12630,
//-12258,	-11884,	-11509,	-11132,	-10753,	-10372,	-9990,	-9607,	-9222,	-8835,	-8448,	-8059,	-7669,	-7277,	-6885,	-6491,
//-6097,	-5702,	-5305,	-4908,	-4511,	-4112,	-3713,	-3314,	-2913,	-2513,	-2112,	-1711,	-1309,	-908,	-506,	-104,
//297,	699,	1101,	1502,	1904,	2305,	2705,	3106,	3506,	3905,	4304,	4702,	5099,	5496,	5892,	6287,
//6681,	7074,	7465,	7856,	8246,	8634,	9021,	9407,	9791,	10174,	10555,	10935,	11313,	11689,	12064,	12437,
//12808,	13177,	13544,	13909,	14271,	14632,	14991,	15347,	15701,	16052,	16402,	16748,	17092,	17434,	17773,	18109,
//18443,	18774,	19102,	19427,	19749,	20068,	20385,	20698,	21008,	21315,	21618,	21919,	22216,	22509,	22800,	23087,
//23370,	23650,	23927,	24199,	24469,	24734,	24996,	25254,	25508,	25758,	26005,	26247,	26486,	26721,	26951,	27178,
//27400,	27619,	27833,	28043,	28249,	28450,	28647,	28840,	29029,	29213,	29393,	29569,	29740,	29906,	30068,	30226,
//30378,	30527,	30671,	30810,	30944,	31074,	31199,	31320,	31436,	31547,	31653,	31755,	31851,	31943,	32030,	32113,
//32190,	32263,	32331,	32394,	32452,	32505,	32553,	32597,	32635,	32669,	32698,	32721,	32740,	32754,	32763,	};

const int16_t sin_tab[128] PROGMEM = {0,
401,	803,	1205,	1607,	2008,	2409,	2809,	3210,	3609,	4009,	4407,	4805,	5202,	5599,	5994,	6389,
6783,	7175,	7567,	7958,	8347,	8735,	9122,	9507,	9891,	10273,	10654,	11033,	11411,	11787,	12161,	12533,
12904,	13272,	13639,	14003,	14365,	14725,	15083,	15439,	15792,	16143,	16492,	16838,	17181,	17522,	17861,	18196,
18529,	18859,	19186,	19511,	19832,	20151,	20466,	20778,	21088,	21394,	21697,	21996,	22292,	22585,	22875,	23161,
23443,	23722,	23998,	24270,	24538,	24802,	25063,	25320,	25573,	25823,	26068,	26310,	26547,	26781,	27011,	27236,
27457,	27675,	27888,	28097,	28301,	28502,	28698,	28890,	29077,	29260,	29439,	29613,	29783,	29949,	30109,	30266,
30417,	30565,	30707,	30845,	30978,	31107,	31231,	31350,	31465,	31575,	31680,	31780,	31876,	31966,	32052,	32133,
32210,	32281,	32348,	32409,	32466,	32518,	32565,	32607,	32645,	32677,	32704,	32727,	32744,	32757,	32765,	32767,
};

int16_t cosinus(int16_t idx) {
	return sinus(idx+128);
}

int16_t sinus(int16_t idx) {
	int8_t sign=1;
	while (idx>256) {
		sign=-sign;
		idx-=256;
	}
	if (idx<128) return sign*(int16_t)pgm_read_word(&sin_tab[idx]);
	else return sign*(int16_t)pgm_read_word(&sin_tab[256-idx]);
}
